# Model & Preprocessor Information

## âœ… Files Status

### Backend Requirements
- [x] `best_attrition_model.pkl` - **FOUND** in project root
- [x] `preprocessor.pkl` - **Generated by notebook**, should be in backend folder

## ğŸ“ File Locations

The backend expects these files in the `backend/` folder:
```
backend/
â”œâ”€â”€ main.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ best_attrition_model.pkl     â† Must be here
â””â”€â”€ preprocessor.pkl               â† Must be here
```

## ğŸ”§ Checking Your Setup

The notebook (`Attrition_Correct.ipynb`) saves both files at the end:

```python
joblib.dump(meilleur_model, 'best_attrition_model.pkl')
joblib.dump(prep_pipeline, 'preprocessor.pkl')
```

## ğŸ“‚ Manual Setup (If Files Missing)

If `preprocessor.pkl` is not found, run the notebook to regenerate:

1. Open `Attrition_Correct.ipynb` in Jupyter
2. Run all cells
3. Files are saved to the notebook's directory
4. Copy both `.pkl` files to `backend/` folder

## âœ¨ Feature Engineering Details

### Numerical Features (Scaled with StandardScaler)
- Age
- DistanceFromHome
- MonthlyIncome
- NumCompaniesWorked
- PercentSalaryHike
- TotalWorkingYears
- TrainingTimesLastYear
- YearsAtCompany
- YearsInCurrentRole
- YearsSinceLastPromotion

### Categorical Features (One-Hot Encoded)
- BusinessTravel
- Department
- EducationField
- Gender
- JobRole
- MaritalStatus
- OverTime

### Target Variable
- Attrition (Yes=1, No=0) - **Not included in input features**

## ğŸ”„ Preprocessing Pipeline

```
Input Data (CSV/XLSX)
    â†“
Extract Features (NUMERIC_COLS + CATEGORICAL_COLS)
    â†“
ColumnTransformer:
  â€¢ StandardScaler on numericals
  â€¢ OneHotEncoder on categoricals
    â†“
Preprocessed Array (suitable for model)
    â†“
Logistic Regression Model
    â†“
Output: Binary prediction + probability
```

## âš ï¸ Important Notes

1. **Column Names Matter**: Input columns must exactly match training data
2. **No Missing Values Allowed**: Pandas/model expects complete data
3. **Feature Order**: Maintained by preprocessor
4. **Encoding Stability**: Unknown categories in new data are handled with `handle_unknown='ignore'`

## ğŸ§ª Testing the Setup

```python
# In Python terminal after starting backend
import joblib

# Load and verify
model = joblib.load('backend/best_attrition_model.pkl')
preprocessor = joblib.load('backend/preprocessor.pkl')

print(f"Model type: {type(model)}")
print(f"Preprocessor type: {type(preprocessor)}")
print("âœ“ Files loaded successfully")
```

## ğŸš¨ Troubleshooting

**Error: "FileNotFoundError: best_attrition_model.pkl"**
â†’ Copy model file from project root to `backend/` folder

**Error: "FileNotFoundError: preprocessor.pkl"**
â†’ Run notebook to generate, then copy to `backend/` folder

**Error: "shape mismatch"**
â†’ Input data has wrong number of features
â†’ Check column names match exactly

---

**Files exist and are ready for use in the backend application.**
